<!-- TODO: header や　mail などの各HTMLファイルで共通な記述は、Thymeleaf の fragment を使用して1つの共通ファイルにまとめた方が良い -->
<!-- TODO: 理由：同じ記述を複数のファイルに記述する事はDRY原則に反している為。 -->

<!-- TODO: DRY原則について https://e-words.jp/w/DRY%E5%8E%9F%E5%89%87.html#:~:text=DRY%E5%8E%9F%E5%89%87%E3%81%A8%E3%81%AF%E3%80%81%E3%82%BD%E3%83%95%E3%83%88%E3%82%A6%E3%82%A7%E3%82%A2,%E9%81%BF%E3%81%91%E3%82%8B%E3%81%B9%E3%81%8D%E3%81%A8%E3%81%99%E3%82%8B%E8%80%83%E3%81%88%E6%96%B9%E3%80%82 -->

<!-- TODO: 共通ファイルにまとめる際の参考URL：https://qiita.com/tamorieeeen/items/4bc818e18f4ff8bdf0c2 -->

<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>ユーザー編集</title>
  <link rel="stylesheet" href="/css/base.css">
  </link>
  <link rel="stylesheet" href="/css/edit.css">
  </link>
</head>

<body>
  <header>
    <h1><a href="/list">◇ユーザー管理システム</a></h1>
    <ul>
      <li>◇<span th:text="${#authentication.principal.name}"></span>さん</li>
      <li><a href="/logout">◇ログアウト</a></li>
    </ul>
  </header>

  <main>
    <nav>
      <a href="/list">◇ユーザーリスト</a><br>
      <th:block th:if="${#authentication.principal.management} != null">
        <a href="/add">◇ユーザー追加</a>
      </th:block>
    </nav>
    <div class="content">
      <form method="post" th:action="@{/update}" th:object="${employee}" enctype="multipart/form-data">
        <h2>ユーザー編集</h2>
        <input type="hidden" name="employee_id" th:value="*{employee_id}">
        <table>
          <tr>
            <td colspan="2">
              <th:block th:if="*{image_file_path} == null">
                <img src="images/default.jpg"><br>
              </th:block>
              <th:block th:if="*{image_file_path} != null">
                <img th:src="@{'images/' + *{image_file_path}}"><br>
              </th:block>
              <input type="file" accept="image/*" th:field="*{multipartFile}">
            </td>
          </tr>
          <tr>
            <th>名前</th>
            <td><input class="form-textarea" type="text" name="name" th:value="*{name}" maxlength="32" required></td>
          </tr>
          <tr>
            <th>所属先</th>
            <td>
              <select name="belong_id">
                <option value="0" th:selected="*{belong_id} == 0">未所属</option>
                <option value="1" th:selected="*{belong_id} == 1">人事部</option>
                <option value="2" th:selected="*{belong_id} == 2">経理部</option>
                <option value="3" th:selected="*{belong_id} == 3">総務部</option>
                <option value="4" th:selected="*{belong_id} == 4">法務部</option>
                <option value="5" th:selected="*{belong_id} == 5">技術部</option>
                <option value="6" th:selected="*{belong_id} == 6">経理部</option>
              </select>
            </td>
          </tr>
          <tr>
            <th>メールアドレス</th>
            <td><input class="form-textarea" type="email" name="mail_address" th:value="*{mail_address}" required>
            </td>
          </tr>
          <tr>
            <th>パスワード</th>
            <td><input class="form-textarea" type="password" name="password" th:value="*{password}" minlength="8"
                maxlength="255" required></td>
          </tr>
        </table>
        <label><input type="checkbox" name="management" value="Y" th:checked="*{management}">管理者権限</label>
        <button>変更</button>
      </form>
    </div>
  </main>
</body>

</html>